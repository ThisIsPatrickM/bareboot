.check:
  tags:
    - dosis
  stage: check
  variables:
    CHECK: clang-tidy
  script: |
    echo "Executing check named ${CHECK}"
    rm -rf build && meson build
    if ninja -C build ${CHECK} | grep -e 'error:\|warning:'; then
      exit 1
    fi

clang-tidy:
  extends: .check
  variables:
    CHECK: tidy

clang-format:
  extends: .check   
  variables: 
    CHECK: clang-format
